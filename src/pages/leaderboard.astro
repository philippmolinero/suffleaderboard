---
import '../styles/global.css';
import Header from '../components/Header.astro';
import data from '../data/data.json';
import Penalty from '../components/Penalty.astro';

const today = new Date();
const endDate = new Date('2025-06-06');
const daysLeft = Math.ceil((endDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));

const leaderboard = await fetch("../data/data.json")
  .then((res) => res.json())
  .catch((err) => console.error(err));

  console.log(data);
---

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-widt`h, initial-scale=1.0">
  <title>Abstinenz Leaderboard</title>
</head>
<body>
    <Header />
  <div class="container">
      <div class="content">
          <div class="header">
              <div class="trophy">üèÜ</div>
              <h1 class="title">Abstinenz Leaderboard</h1>
          </div>
          <h2 style="text-align: center;">Noch {daysLeft} Tage!</h2>
          <div class="card">
              <table>
                  <thead>
                      <tr>
                          <th style="width: 96px;">Platz</th>
                          <th>Name</th>
                          <th>x Suff</th>
                          <th>Joker left</th>
                          <th style="text-align: right;">Strafkonto</th>
                      </tr>
                  </thead>
                  <tbody>
                      <!-- Row 1 -->
                      <tr>
                          <td>
                              <div class="rank-cell">
                                  <span class="medal-gold">ü•á</span>
                                  <span class="top-three">1</span>
                              </div>
                          </td>
                          <td class="top-three">John Doe</td>
                          <td class="top-three">0</td>
                          <td>
                              <div class="jokers">
                                  <span>üç∫üç∫üç∫</span>
                              </div>
                          </td>
                          <td style="text-align: right;">
                              <span class="zero-balance">‚Ç¨0</span>
                          </td>
                      </tr>

                      <!-- Row 2 -->
                      <tr>
                          <td>
                              <div class="rank-cell">
                                  <span class="medal-silver">ü•à</span>
                                  <span class="top-three">2</span>
                              </div>
                          </td>
                          <td class="top-three">Tom Brown</td>
                          <td class="top-three">1</td>
                          <td>
                              <div class="jokers">
                                  üç∫üç∫
                              </div>
                          </td>
                          <td style="text-align: right;">
                              <span class="zero-balance">‚Ç¨0</span>
                          </td>
                      </tr>

                      <!-- Row 3 -->
                      <tr>
                          <td>
                              <div class="rank-cell">
                                  <span class="medal-bronze">ü•â</span>
                                  <span class="top-three">3</span>
                              </div>
                          </td>
                          <td class="top-three">Jane Smith</td>
                          <td class="top-three">2</td>
                          <td>
                              <div class="jokers">
                                  üç∫
                              </div>
                          </td>
                          <td style="text-align: right;">
                              <span class="zero-balance">‚Ç¨0</span>
                          </td>
                      </tr>

                      <!-- Row 4 -->
                      <tr>
                          <td>
                              <div class="rank-cell">
                                  <span class="default-text">4</span>
                              </div>
                          </td>
                          <td class="default-text">Sarah Wilson</td>
                          <td class="default-text">3</td>
                          <td>
                              <div class="jokers">
                                  <!-- No jokers -->
                              </div>
                          </td>
                          <td style="text-align: right;">
                              <span class="zero-balance">‚Ç¨0</span>
                          </td>
                      </tr>

                      <!-- Row 5 -->
                      <tr>
                          <td>
                              <div class="rank-cell">
                                  <span class="default-text">5</span>
                              </div>
                          </td>
                          <td class="default-text">Mike Johnson</td>
                          <td class="default-text">4</td>
                          <td>
                              <div class="jokers">
                                  <!-- No jokers -->
                              </div>
                          </td>
                          <td style="text-align: right;">
                              <span class="positive-balance">‚Ç¨50</span>
                          </td>
                      </tr>
                  </tbody>
              </table>
          </div>
      </div>
  </div>
  <Penalty />
</body>